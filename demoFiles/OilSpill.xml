<?xml version="1.0" encoding="us-ascii"?>
<!DOCTYPE library SYSTEM "DeltaTickFormat.dtd">
<library name="Oil Spill" version="0.5">
    <breed singular="a-fish" plural="fish" setupNumber="100">
        <ownVar name="age">
            <setupReporter>random 50</setupReporter>
        </ownVar>
        <ownVar name="children">
            <setupReporter>0</setupReporter>
        </ownVar>
        <setupCode>
    setxy random-xcor random-ycor
        </setupCode>
        <updateCode>set age age + 1</updateCode>
    </breed>

    <global name="turtles-last-tick">
        <setupReporter>count turtles</setupReporter>
        <updateReporter>count turtles</updateReporter>
    </global>

    <go>
if not any? turtles [ stop ]
if count turtles > 10000 [ stop ]
    </go>

    <setup>
        ask patches [ if random 5 &lt; 4 [ set pcolor white ] ]
    </setup>

    <behavior name="wander">
        <commands>
    rt random 360
    fd .5
        </commands>
    </behavior>

    <behavior name="reproduce-with-probability">
        <input name="probability" default=".01"></input>
        <commands>
    if random-float 1 &lt; probability [
            set children children + 1
    hatch 1 [
    set age 0
    ;; move a little so we can see you
    rt random 360
    fd .5 
    ]
    ]
        </commands>
    </behavior>

    <behavior name="die-at-age">
        <input name="old-age" default="75"></input>
        <commands>
    if age &gt; old-age [
    die
    ]
        </commands>
    </behavior>

    <behavior name="die-with-probability">
        <input name="probability" default=".01"></input>
        <commands>
    if random-float 1 &lt; probability [ 
    die
    ]
        </commands>
    </behavior>

        <quantity name="count-all">
        <reporter>count turtles</reporter>
    </quantity>

    <quantity name="count-of">
        <input name="breed-type" default="people"></input>
        <reporter>count turtles with [ breed = breed-type ]</reporter>
    </quantity>

    <quantity name="change-in-all">
        <reporter>count turtles - turtles-last-tick</reporter>
    </quantity>
    
    <condition name="any-here?">
        <input name="breed-type" default="people"></input>
        <test>any? other turtles-here with [ breed = breed-type ]</test>
    </condition>

    <condition name="oil-here?">
        <test>pcolor = black</test>
    </condition>
    
    <condition name="any-nearby?">
        <input name="breed-type" default="people"></input>
        <test>count neighbors with [ any? other turtles-here with [ breed = breed-type ] ] > 0</test>
    </condition>
    
    <condition name="age-between?">
        <input name="min-age" default="15"></input>
        <input name="max-age" default="55"></input>
        <test>age &gt; min-age and age &lt; max-age</test>
    </condition>
    
    <condition name="older-than?">
        <input name="min-age" default="65"></input>        
        <test>age &gt; max-age</test>
    </condition>

    <condition name="less-than-children?">
        <input name="max-children" default="3"></input>
        <test>children &lt; max-children</test>
    </condition>

    <condition name="at-least-this-much-space?">
        <input name="number-patches" default="4"></input>
        <test>count neighbors with [ not any? people-here ] >= number-patches</test>
    </condition>
</library>